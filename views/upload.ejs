<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/assets/PodScholars-removebg-preview.png" />

    <!--Bootstrap CSS-->
    <link href="/css/bootstrap.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet" />
    <link href="/css/header.css" rel="stylesheet" />

    <!--Bootstrap Icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

    <!--Bootstrap JS/Popper Bundle-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!--jquery hosted locally-->
    <script src="/js/jquery-3.6.0.js"></script>

    <title>Upload a podcast</title>
</head>

<body>
    <%- include('./components/nav.html') %>
        <main class="d-flex justify-content-center flex-column m-4 p-4">

            <h3 class="text-center">Upload A Podcast</h3>
            <small class="text-center mb-1 mb-md-4 text-danger">* indicates required fields</small>

            <div id="formHolder" class="d-flex justify-content-center mx-md-4 px-md-4">
                <form id="uploadForm" class="container" method="post" action="/podcasts/create">
                    <ul class="list-unstyled d-flex flex-column">
                        <li class="my-2 d-flex flex-row flex-wrap flex-md-nowrap px-md-5">
                            <!--title-->
                            <div class="d-flex flex-wrap flex-fill pe-1 my-1">
                                <label for="title" class="d-flex flex-row">Title: <span class="text-danger">*</span></label>
                                <input type="text" id="title" class="form-control" placeholder="Title" required>
                            </div>

                            <!--DATE-->
                            <div class="d-flex flex-wrap ps-1 my-1">
                                <label for="pubDate">Published Date: <span class="text-danger">*</span></label>
                                <input type="date" id="pubDate" class="form-control" placeholder="pubDate" required>
                            </div>
                        </li>

                        <li class="my-2 d-flex flex-row flex-wrap flex-md-nowrap px-md-5 px-1">
                            <!--Category will be made into a select, temporarily a text field-->
                            <div class="d-flex flex-wrap flex-fill my-1">
                                <label for="category">Category: <span class="text-danger">*</span></label>
                                <select name="category" id="category" class="form-select">
                                    <% for (let categ in categs) { %>
                                        <option value="<%- categ %>"><%- categ %></option>
                                        <% } %>
                                </select>
                            </div>

                            <!--doi-->
                            <div class="d-flex flex-wrap my-1 ms-md-2">
                                <label for="doi">DOI#: <span class="text-danger">*</span></label>
                                <input type="text" id="doi" class="form-control" placeholder="DOI" required>
                            </div>
                        </li>

                        <!--AUTHORS-->
                        <li class="my-2 px-md-5 px-1">
                            <fieldset name="authors" id="authFields" class="d-flex flex-wrap">
                                <legend class="mb-auto">Authors:</legend>
                                <div class="my-2 visually-hidden me-2" id="authTemplate">
                                    <div class="input-group">
                                        <button type="button" class="bi bi-x-lg p-1 btn btn-yellow" disabled hidden></button>
                                        <input type="text" class="form-control form-control-sm" placeholder="author name" disabled hidden>
                                        <input type="email" class="form-control form-control-sm" placeholder="author email" disabled hidden>
                                    </div>
                                </div>
                            </fieldset>
                            <button id="authBtn" type="button" class="bi bi-plus btn btn-sm btn-secondary"> New Author</button>
                            <span id="fieldMessage" class="text-danger visually-hidden">At Least One Author is required.</span>
                        </li>

                        <!-- TAGS-->
                        <li class="my-2 px-md-5 px-1">
                            <fieldset name="tags" id="tagFields" class="d-flex flex-wrap">
                                <legend class="mb-auto">Tags:</legend>
                                <div class="my-2 visually-hidden me-2" id="tagTemplate">
                                    <div class="input-group input-group-sm">
                                        <button type="button" class="bi bi-x-lg p-1 btn btn-yellow" disabled hidden></button>
                                        <input type="text" class="form-control" placeholder="tag" disabled hidden>
                                    </div>
                                </div>
                            </fieldset>
                            <button id="tagBtn" type="button" class="bi bi-plus btn btn-sm btn-secondary"> New Tag</button>
                            <span id="tagMessage" class="text-danger visually-hidden">At Least Three Tags are required.</span>
                        </li>

                        <li class="my-2 px-md-5 px-1 d-flex flex-row flex-wrap flex-md-nowrap">
                            <!--PODCASTS-->
                            <div class="d-flex flex-wrap flex-row me-md-2">
                                <label for="file">Podcast:</label>
                                <input type="file" accept=".mp3" id="file" class="form-control" required>
                                <small id="filedesc" class="form-text text-muted">Please upload an .mp3 file.</small>
                            </div>

                            <!--BIBTEX-->
                            <div class="d-flex flex-wrap flex-row ">
                                <label for="file">Bibtex File:</label>
                                <input type="file" accept=".bib" id="file" class="form-control" required>
                                <small id="filedesc" class="form-text text-muted">Please upload an .bib file.</small>
                            </div>
                        </li>

                        <li class="my-2 d-flex align-self-center">
                            <!--Terms and conditions-->
                            <div class="form-check my-2">
                                <input class="form-check-input" type="checkbox" value="" id="termsConds" name="termsConds" required>
                                <label class="form-check-label" for="termsConds">
                  Please Accept the Terms and Conditions
                </label>
                            </div>
                        </li>
                        <li class="text-center">
                            <button type="submit" id="submitBtn" form="uploadForm" class="btn btn-outline-dark">Submit</button>
                        </li>
                    </ul>
                </form>
            </div>
            <div id="thanksMessage" class="visually-hidden">
                Thank you for sharing your work with us!
            </div>
        </main>

</body>
<script src="/js/uploader.js"></script>
<script>
    uploader()
</script>

</html>